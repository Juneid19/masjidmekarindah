<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masjid Jami' Mekarindah</title>
    <meta name="description" content="Website Resmi Masjid Jami' Mekarindah - Cikarang Baru, Jawa Barat">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0d7a3a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Masjid Mekarindah">
    <meta name="application-name" content="Masjid Mekarindah">
    <meta name="msapplication-TileColor" content="#0d7a3a">
    <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Apple Touch Icons -->
<link rel="apple-touch-icon" href="/icons/android-launchericon-192-192.png">
<link rel="apple-touch-icon" sizes="180x180" href="/icons/android-launchericon-192-192.png">

<!-- Favicon -->
<link rel="icon" type="image/png" sizes="32x32" href="/icons/android-launchericon-96-96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/icons/android-launchericon-48-48.png">

<!-- Microsoft Tile -->
<meta name="msapplication-TileImage" content="/icons/android-launchericon-144-144.png">
    
    <!-- Preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://api.jsonbin.io">
    <link rel="preconnect" href="https://api.aladhan.com">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    
    <style>
        :root {
            --primary: #0d7a3a;
            --primary-dark: #095c2b;
            --primary-light: #e8f5e9;
            --secondary: #1a5e2a;
            --gold: #d4af37;
            --gold-light: #f4e4a6;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --white: #ffffff;
            --gray: #6c757d;
            --shadow: 0 4px 15px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 30px rgba(0,0,0,0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s, visibility 0.5s;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-logo {
            width: 120px;
            height: 120px;
            background: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            animation: pulse 1.5s infinite;
        }

        .loading-logo i {
            font-size: 50px;
            color: var(--primary);
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .loading-bar {
            height: 100%;
            background: var(--gold);
            width: 0%;
            animation: loading 2s ease-in-out forwards;
        }

        .loading-text {
            color: var(--white);
            font-size: 14px;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--white);
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--primary);
            font-weight: 700;
            font-size: 1.2rem;
        }

        .nav-brand i {
            font-size: 1.5rem;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        .nav-menu a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
            font-size: 0.9rem;
        }

        .nav-menu a:hover {
            color: var(--primary);
        }

        .nav-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary);
        }

        @media (max-width: 768px) {
            .nav-menu {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 70px);
                background: var(--white);
                flex-direction: column;
                padding: 30px;
                gap: 20px;
                transition: left 0.3s;
            }

            .nav-menu.active {
                left: 0;
            }

            .nav-toggle {
                display: block;
            }
        }

        /* Sections */
        section {
            padding: 80px 5%;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-title h2 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .section-title p {
            color: var(--gray);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            padding-top: 100px;
        }

        .hero-image {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--gold);
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .hero-ayat {
            font-family: 'Amiri', serif;
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: var(--gold-light);
        }

        .hero-translation {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 600px;
            margin-bottom: 10px;
        }

        .hero-reference {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-bottom: 30px;
        }

        .hero-address {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            opacity: 0.9;
        }

        /* Prayer Times */
        .jadwal-sholat {
            background: var(--white);
        }

        .tanggal-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .tanggal-hijriah {
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: 600;
        }

        .tanggal-masehi {
            color: var(--gray);
        }

        .prayer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        .prayer-card {
            background: var(--light);
            border-radius: 15px;
            padding: 25px 15px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
        }

        .prayer-card.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .prayer-card.active .prayer-time {
            color: var(--gold-light);
        }

        .prayer-card .prayer-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--gold);
        }

        .prayer-card.active .prayer-icon {
            animation: pulse 1s infinite;
        }

        .prayer-card h4 {
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .prayer-time {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .prayer-badge {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gold);
            color: var(--dark);
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .countdown-container {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 15px;
            color: var(--white);
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .countdown-label {
            font-size: 0.9rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .countdown-time {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--gold-light);
        }

        /* About Section */
        .tentang {
            background: var(--light);
        }

        .tentang-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .tentang-item {
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .tentang-item h3 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tentang-item ul {
            padding-left: 10px;
            list-style: none;
        }

        .tentang-item li {
            margin-bottom: 12px;
            padding-left: 5px;
            line-height: 1.7;
        }

        /* Pengurus */
        .pengurus {
            background: var(--white);
        }

        .kategori-title {
            text-align: center;
            font-size: 1.3rem;
            color: var(--primary);
            margin: 40px 0 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--gold);
            display: inline-block;
            width: 100%;
        }

        .pengurus-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .pengurus-card {
            background: var(--light);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s;
        }

        .pengurus-card:hover {
            transform: translateY(-5px);
        }

        .pengurus-foto {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--gold);
            margin-bottom: 15px;
        }

        .pengurus-card h4 {
            color: var(--dark);
            margin-bottom: 5px;
        }

        .pengurus-card p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Kajian */
        .kajian {
            background: var(--light);
        }

        .kajian-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .kajian-card {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .kajian-card:hover {
            transform: translateY(-5px);
        }

        .kajian-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .kajian-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.3rem;
        }

        .kajian-hari {
            font-weight: 600;
            color: var(--primary);
        }

        .kajian-waktu {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .kajian-tema {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .kajian-ustadz {
            color: var(--gray);
            font-size: 0.95rem;
        }

        .kajian-link {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-top: 15px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .kajian-link:hover {
            text-decoration: underline;
        }

        /* Keuangan & Zakat */
        .keuangan, .zakat {
            background: var(--white);
        }

        .laporan-accordion {
            max-width: 900px;
            margin: 0 auto;
        }

        .accordion-item {
            background: var(--light);
            border-radius: 12px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .accordion-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--primary);
            transition: background 0.3s;
        }

        .accordion-header:hover {
            background: rgba(13, 122, 58, 0.1);
        }

        .accordion-header i {
            transition: transform 0.3s;
        }

        .accordion-item.active .accordion-header i {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .accordion-item.active .accordion-content {
            max-height: 2000px;
        }

        .accordion-body {
            padding: 20px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        .saldo-ringkasan {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .saldo-box {
            background: var(--white);
            padding: 20px 25px;
            border-radius: 12px;
            text-align: center;
            min-width: 140px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .saldo-box.highlight {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
        }

        .saldo-box label {
            display: block;
            font-size: 0.8rem;
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .saldo-box .amount {
            font-size: 1.1rem;
            font-weight: 700;
        }

        .saldo-box.highlight .amount {
            color: var(--gold-light);
        }

        .rincian-section h4 {
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .rincian-list {
            list-style: none;
        }

        .rincian-list li {
            padding: 10px 0;
            border-bottom: 1px dashed rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
        }

        .rincian-list li:last-child {
            border-bottom: none;
        }

        /* Kisah & Serba Serbi */
        .kisah, .serba-serbi {
            background: var(--light);
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .content-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .content-card:hover {
            transform: translateY(-5px);
        }

        .content-card img {
            width: 100%;
            aspect-ratio: 8/5;
            object-fit: cover;
        }

        .content-card-body {
            padding: 20px;
        }

        .content-card h4 {
            margin-bottom: 10px;
            color: var(--dark);
        }

        .content-card .date {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .badge-penting {
            background: #dc3545;
            color: white;
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 10px;
        }

        /* Donasi */
        .donasi {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            text-align: center;
        }

        .donasi .section-title h2 {
            color: var(--white);
        }

        .donasi .section-title p {
            color: rgba(255,255,255,0.8);
        }

        .donasi-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .donasi-ayat {
            font-family: 'Amiri', serif;
            font-size: 1.6rem;
            margin-bottom: 20px;
            color: var(--gold-light);
            line-height: 2;
            text-align: center;
            padding: 0 10px;
        }

        .donasi-translation {
            font-size: 1rem;
            opacity: 0.95;
            margin-bottom: 10px;
            line-height: 1.8;
            text-align: center;
            font-style: italic;
        }

        .donasi-reference {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 40px;
        }

        .bank-logo {
            width: 120px;
            margin-bottom: 20px;
            filter: brightness(0) invert(1);
        }

        .rekening-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            background: rgba(255,255,255,0.15);
            padding: 30px 40px;
            border-radius: 20px;
            margin-bottom: 25px;
            width: 100%;
            max-width: 400px;
            backdrop-filter: blur(10px);
        }

        .rekening-number {
            font-size: 2.2rem;
            font-weight: 700;
            letter-spacing: 3px;
            margin-bottom: 10px;
            color: var(--gold-light);
        }

        .rekening-name {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .btn-copy {
            background: var(--gold);
            color: var(--dark);
            border: none;
            padding: 15px 35px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
        }

        .btn-copy:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
        }

        .donasi-quote {
            margin-top: 40px;
            font-style: italic;
            opacity: 0.9;
            font-size: 1rem;
        }

        /* Galeri */
        .galeri {
            background: var(--white);
        }

        .galeri-slider {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 15px;
        }

        .galeri-track {
            display: flex;
            transition: transform 0.5s ease;
        }

        .galeri-slide {
            min-width: 100%;
            position: relative;
        }

        .galeri-slide img {
            width: 100%;
            height: 400px;
            object-fit: cover;
        }

        .galeri-slide iframe {
            width: 100%;
            height: 400px;
            border: none;
        }

        /* YouTube Thumbnail */
        .youtube-thumbnail {
            width: 100%;
            height: 400px;
            position: relative;
            cursor: pointer;
            background: #000;
        }

        .youtube-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .youtube-thumbnail:hover img {
            opacity: 1;
        }

        .youtube-play-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: rgba(255, 0, 0, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s, background 0.3s;
        }

        .youtube-thumbnail:hover .youtube-play-btn {
            transform: translate(-50%, -50%) scale(1.1);
            background: rgba(255, 0, 0, 1);
        }

        .youtube-play-btn i {
            color: white;
            font-size: 30px;
            margin-left: 5px;
        }

        .youtube-active iframe {
            width: 100%;
            height: 400px;
            border: none;
        }

        /* Social Media Cards */
        .social-card {
            width: 100%;
            height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .social-card.instagram {
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
        }

        .social-card.tiktok {
            background: #000000;
        }

        .social-card i {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .social-card.tiktok i {
            background: linear-gradient(45deg, #69C9D0, #EE1D52, #69C9D0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .social-card-text {
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
            padding: 0 20px;
        }

        .social-card-keterangan {
            font-size: 1rem;
            font-weight: 400;
            text-align: center;
            padding: 10px 30px;
            opacity: 0.9;
            max-width: 80%;
            line-height: 1.5;
        }

        .social-card-action {
            margin-top: 20px;
            padding: 12px 30px;
            border: 2px solid white;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .social-card:hover .social-card-action {
            background: white;
            color: #333;
        }

        .galeri-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: white;
            padding: 40px 20px 20px;
            text-align: center;
        }

        .galeri-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.9);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--primary);
            transition: all 0.3s;
            z-index: 10;
        }

        .galeri-nav:hover {
            background: var(--primary);
            color: white;
        }

        .galeri-nav.prev {
            left: 15px;
        }

        .galeri-nav.next {
            right: 15px;
        }

        .galeri-dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 20px;
        }

        .galeri-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--gray);
            cursor: pointer;
            transition: all 0.3s;
        }

        .galeri-dot.active {
            background: var(--primary);
            transform: scale(1.2);
        }

        .galeri-resume {
            display: none;
            justify-content: center;
            margin-top: 15px;
        }

        .galeri-resume.show {
            display: flex;
        }

        .btn-resume {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
        }

        /* Radio */
        .radio {
            background: var(--light);
        }

        .radio-container {
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
        }

        .radio-player {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .radio-iframe-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }

        .radio-iframe-container iframe {
            border-radius: 10px;
        }

        .radio-alt {
            margin-top: 20px;
        }

        .radio-alt a {
            color: var(--primary);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .radio-alt a:hover {
            text-decoration: underline;
        }

        /* Lokasi */
        .lokasi {
            background: var(--white);
        }

        .lokasi-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .map-container {
            width: 100%;
            height: 400px;
            background: var(--light);
            border-radius: 15px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
        }

        .map-placeholder {
            text-align: center;
            color: var(--gray);
        }

        .map-placeholder i {
            font-size: 50px;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .map-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .lokasi-info {
            margin-top: 20px;
            text-align: center;
        }

        .lokasi-info p {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: var(--white);
            padding: 50px 5% 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h4 {
            color: var(--gold);
            margin-bottom: 20px;
        }

        .footer-section p, .footer-section a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            display: block;
            margin-bottom: 10px;
        }

        .footer-section a:hover {
            color: var(--gold);
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .social-links a:hover {
            background: var(--gold);
            color: var(--dark);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* Back to Top */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 999;
        }

        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: var(--primary-dark);
            transform: translateY(-5px);
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            border-radius: 15px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: var(--white);
            border-radius: 15px 15px 0 0;
        }

        .modal-header h3 {
            color: var(--primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-body img {
            width: 100%;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .modal-body .content {
            line-height: 1.8;
            color: var(--dark);
            white-space: pre-line;
        }

        /* Animations */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 1.8rem;
            }

            .hero-image {
                width: 150px;
                height: 150px;
            }

            .prayer-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .countdown-time {
                font-size: 2rem;
            }

            .donasi-ayat {
                font-size: 1.3rem;
            }

            .donasi-translation {
                font-size: 0.95rem;
            }

            .rekening-number {
                font-size: 1.6rem;
                letter-spacing: 2px;
            }

            .galeri-slide img,
            .galeri-slide iframe,
            .social-card,
            .youtube-thumbnail,
            .youtube-active iframe {
                height: 300px;
            }

            .social-card i {
                font-size: 60px;
            }

            .social-card-keterangan {
                font-size: 0.9rem;
                padding: 10px 20px;
            }

            .youtube-play-btn {
                width: 60px;
                height: 60px;
            }

            .youtube-play-btn i {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">
            <i class="fas fa-mosque"></i>
        </div>
        <div class="loading-progress">
            <div class="loading-bar"></div>
        </div>
        <p class="loading-text">Memuat data...</p>
    </div>

    <!-- Navbar -->
    <nav class="navbar">
        <a href="#" class="nav-brand">
            <i class="fas fa-mosque"></i>
            <span>Masjid Mekarindah</span>
        </a>
        <ul class="nav-menu" id="navMenu">
            <li><a href="#jadwal-sholat">Jadwal Sholat</a></li>
            <li><a href="#tentang">Tentang</a></li>
            <li><a href="#kajian">Kajian</a></li>
            <li><a href="#keuangan">Keuangan</a></li>
            <li><a href="#galeri">Galeri</a></li>
            <li><a href="#donasi">Donasi</a></li>
        </ul>
        <button class="nav-toggle" id="navToggle">
            <i class="fas fa-bars"></i>
        </button>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <img src="https://via.placeholder.com/400x400/0d7a3a/ffffff?text=Masjid" alt="Masjid Mekarindah" class="hero-image" id="heroImage">
        <h1>Masjid Jami' Mekarindah</h1>
        <p class="hero-ayat">وَأَنَّ الْمَسَاجِدَ لِلَّهِ فَلَا تَدْعُوا مَعَ اللَّهِ أَحَدًا</p>
        <p class="hero-translation">"Dan sesungguhnya masjid-masjid itu adalah milik Allah, maka janganlah kamu menyembah apapun selain Allah."</p>
        <p class="hero-reference">QS. Al-Jin: 18</p>
        <div class="hero-address">
            <i class="fas fa-map-marker-alt"></i>
            <span id="heroAddress">Jalan Puspita II No.1 Mekarindah, Cikarang Baru</span>
        </div>
    </section>

    <!-- Jadwal Sholat -->
    <section class="jadwal-sholat" id="jadwal-sholat">
        <div class="section-title fade-in">
            <h2><i class="fas fa-clock"></i> Jadwal Sholat</h2>
            <p>Waktu sholat untuk wilayah Mekarindah, Cikarang Baru</p>
        </div>
        <div class="tanggal-container fade-in">
            <p class="tanggal-hijriah" id="tanggalHijriah">-</p>
            <p class="tanggal-masehi" id="tanggalMasehi">-</p>
        </div>
        <div class="prayer-grid fade-in" id="prayerGrid"></div>
        <div class="countdown-container fade-in" id="countdownContainer">
            <p class="countdown-label">Waktu menuju sholat berikutnya</p>
            <p class="countdown-time" id="countdownTime">--:--:--</p>
        </div>
    </section>

    <!-- Tentang -->
    <section class="tentang" id="tentang">
        <div class="section-title fade-in">
            <h2><i class="fas fa-info-circle"></i> Tentang Masjid</h2>
        </div>
        <div class="tentang-content fade-in" id="tentangContent"></div>
    </section>

    <!-- Pengurus -->
    <section class="pengurus" id="pengurus">
        <div class="section-title fade-in">
            <h2><i class="fas fa-users"></i> Struktur Organisasi</h2>
        </div>
        <div id="pengurusContent"></div>
    </section>

    <!-- Kajian -->
    <section class="kajian" id="kajian">
        <div class="section-title fade-in">
            <h2><i class="fas fa-book-open"></i> Jadwal Kajian</h2>
        </div>
        <div class="kajian-grid fade-in" id="kajianGrid"></div>
    </section>

    <!-- Keuangan -->
    <section class="keuangan" id="keuangan">
        <div class="section-title fade-in">
            <h2><i class="fas fa-chart-line"></i> Laporan Keuangan</h2>
        </div>
        <div class="laporan-accordion fade-in" id="keuanganAccordion"></div>
    </section>

    <!-- Zakat -->
    <section class="zakat" id="zakat">
        <div class="section-title fade-in">
            <h2><i class="fas fa-hand-holding-heart"></i> Laporan Zakat</h2>
        </div>
        <div class="laporan-accordion fade-in" id="zakatAccordion"></div>
    </section>

    <!-- Kisah -->
    <section class="kisah" id="kisah">
        <div class="section-title fade-in">
            <h2><i class="fas fa-book"></i> Kisah Inspiratif</h2>
        </div>
        <div class="content-grid fade-in" id="kisahGrid"></div>
    </section>

    <!-- Donasi -->
    <section class="donasi" id="donasi">
        <div class="section-title fade-in">
            <h2><i class="fas fa-donate"></i> Donasi</h2>
            <p>Mari bersama membangun dan memakmurkan masjid</p>
        </div>
        <div class="donasi-container fade-in">
            <!-- Ayat Al-Baqarah 261 Lengkap -->
            <p class="donasi-ayat">
                مَّثَلُ الَّذِينَ يُنفِقُونَ أَمْوَالَهُمْ فِي سَبِيلِ اللَّهِ كَمَثَلِ حَبَّةٍ أَنۢبَتَتْ سَبْعَ سَنَابِلَ فِي كُلِّ سُنۢبُلَةٍ مِّائَةُ حَبَّةٍ ۗ وَاللَّهُ يُضَاعِفُ لِمَن يَشَاءُ ۗ وَاللَّهُ وَاسِعٌ عَلِيمٌ
            </p>
            <p class="donasi-translation">
                "Perumpamaan orang-orang yang menginfakkan hartanya di jalan Allah adalah seperti (orang yang menabur) sebutir benih yang menumbuhkan tujuh tangkai, pada setiap tangkai ada seratus biji. Allah melipatgandakan (pahala) bagi siapa yang Dia kehendaki, dan Allah Mahaluas (karunia-Nya) lagi Maha Mengetahui."
            </p>
            <p class="donasi-reference">QS. Al-Baqarah: 261</p>
            
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/a0/Bank_Syariah_Indonesia.svg" alt="BSI" class="bank-logo" id="bankLogo">
            
            <div class="rekening-box">
                <p class="rekening-number" id="rekeningNumber">2022-112-212</p>
                <p class="rekening-name">a.n. <span id="rekeningName">Yayasan Islam Mekarindah</span></p>
            </div>
            
            <button class="btn-copy" onclick="copyRekening()">
                <i class="fas fa-copy"></i>
                <span>Salin Nomor Rekening</span>
            </button>
            
            <p class="donasi-quote">"Sedekah tidak akan mengurangi harta" — HR. Muslim</p>
        </div>
    </section>

    <!-- Galeri -->
    <section class="galeri" id="galeri">
        <div class="section-title fade-in">
            <h2><i class="fas fa-images"></i> Galeri</h2>
        </div>
        <div class="galeri-slider fade-in">
            <div class="galeri-track" id="galeriTrack"></div>
            <button class="galeri-nav prev" onclick="prevSlide()">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="galeri-nav next" onclick="nextSlide()">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="galeri-dots" id="galeriDots"></div>
        <div class="galeri-resume" id="galeriResume">
            <button class="btn-resume" onclick="resumeSlideshow()">
                <i class="fas fa-play"></i> Lanjutkan Slideshow
            </button>
        </div>
    </section>

    <!-- Serba Serbi -->
    <section class="serba-serbi" id="serba-serbi">
        <div class="section-title fade-in">
            <h2><i class="fas fa-newspaper"></i> Serba Serbi</h2>
        </div>
        <div class="content-grid fade-in" id="serbaSerbiGrid"></div>
    </section>

    <!-- Radio - LANGSUNG PLAYER -->
    <section class="radio" id="radio">
        <div class="section-title fade-in">
            <h2><i class="fas fa-broadcast-tower"></i> Radio Streaming</h2>
            <p>Dengarkan siaran langsung dari Masjid Mekarindah</p>
        </div>
        <div class="radio-container fade-in">
            <div class="radio-player">
                <div class="radio-iframe-container" id="radioContainer">
                    <!-- Player akan dimuat otomatis -->
                </div>
                <div class="radio-alt">
                    <a href="https://radio.garden/listen/suara-masjid-mekarindah/zUn3RO2v" target="_blank">
                        <i class="fas fa-external-link-alt"></i>
                        Buka di Radio Garden
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Lokasi -->
    <section class="lokasi" id="lokasi">
        <div class="section-title fade-in">
            <h2><i class="fas fa-map-marker-alt"></i> Lokasi</h2>
        </div>
        <div class="lokasi-container fade-in">
            <div class="map-container" id="mapContainer" onclick="loadMap()">
                <div class="map-placeholder">
                    <i class="fas fa-map-marked-alt"></i>
                    <p>Klik untuk memuat peta</p>
                </div>
            </div>
            <div class="lokasi-info">
                <p><i class="fas fa-map-marker-alt"></i> <span id="lokasiAlamat">Jalan Puspita II No.1 Mekarindah, Cikarang Baru</span></p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4><i class="fas fa-mosque"></i> Masjid Mekarindah</h4>
                <p>Masjid Jami' Mekarindah adalah pusat ibadah dan kegiatan keislaman bagi masyarakat Mekarindah dan sekitarnya.</p>
            </div>
            <div class="footer-section">
                <h4>Kontak</h4>
                <p><i class="fas fa-map-marker-alt"></i> Jl. Puspita II No.1 Mekarindah</p>
                <p><i class="fas fa-envelope"></i> info@masjidmekarindah.com</p>
            </div>
            <div class="footer-section">
                <h4>Ikuti Kami</h4>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="#"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Masjid Jami' Mekarindah. All rights reserved.</p>
        </div>
    </footer>

    <!-- Back to Top -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Modal -->
    <div class="modal" id="contentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Judul</h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <img src="" alt="" id="modalImage">
                <div class="content" id="modalContent"></div>
            </div>
        </div>
    </div>

    <script>
        // ==================== CONFIG ====================
        const CONFIG = {
            BIN_ID: '696382b6d0ea881f4063d4d7',
            API_KEY: '$2a$10$amElu/7hqB7QAfAipp.qtOYQd1BhrP82EfsNbB4jS.0EKexF6Z/t.',
            CACHE_KEY: 'masjidmekarindah_data',
            CACHE_DURATION: 5 * 60 * 1000,
            LATITUDE: -6.303273,
            LONGITUDE: 107.167014,
            ALAMAT: 'Jalan Puspita II No.1 Mekarindah, Cikarang Baru'
        };

        let DATA = null;
        let currentSlide = 0;
        let slideInterval = null;
        let slidePaused = false;
        let countdownInterval = null;

        // ==================== CACHE FUNCTIONS ====================
        function getCache() {
            try {
                const cached = localStorage.getItem(CONFIG.CACHE_KEY);
                if (cached) {
                    const { data, timestamp } = JSON.parse(cached);
                    if (Date.now() - timestamp < CONFIG.CACHE_DURATION) {
                        return data;
                    }
                }
            } catch (e) {
                console.log('Cache error:', e);
            }
            return null;
        }

        function setCache(data) {
            try {
                localStorage.setItem(CONFIG.CACHE_KEY, JSON.stringify({
                    data: data,
                    timestamp: Date.now()
                }));
            } catch (e) {
                console.log('Cache save error:', e);
            }
        }

        // ==================== DATA LOADING ====================
        async function loadData() {
            try {
                const cached = getCache();
                if (cached) {
                    DATA = cached;
                    renderAll();
                    refreshDataInBackground();
                    return;
                }

                const response = await fetch(`https://api.jsonbin.io/v3/b/${CONFIG.BIN_ID}/latest`, {
                    headers: { 'X-Master-Key': CONFIG.API_KEY }
                });
                const result = await response.json();
                DATA = result.record;
                setCache(DATA);
                renderAll();
            } catch (error) {
                console.error('Error loading data:', error);
                loadDefaultData();
            }
        }

        async function refreshDataInBackground() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${CONFIG.BIN_ID}/latest`, {
                    headers: { 'X-Master-Key': CONFIG.API_KEY }
                });
                const result = await response.json();
                DATA = result.record;
                setCache(DATA);
            } catch (e) {
                console.log('Background refresh failed:', e);
            }
        }

        function loadDefaultData() {
            DATA = {
                tentang: {
                    deskripsi: 'Masjid Jami\' Mekarindah adalah pusat ibadah dan kegiatan keislaman.',
                    visi: 'Menjadi masjid yang makmur dan bermanfaat bagi umat.',
                    misi: ['Menyelenggarakan sholat berjamaah', 'Mengadakan kajian rutin', 'Melayani kegiatan sosial']
                },
                pengurus: [],
                kajian: [],
                keuangan: [],
                zakat: [],
                kisah: [],
                galeri: [],
                serbaSerbi: [],
                pengaturan: {
                    gambarMasjid: 'https://via.placeholder.com/400x400/0d7a3a/ffffff?text=Masjid',
                    alamat: CONFIG.ALAMAT,
                    rekening: '2022-112-212',
                    atasNama: 'Yayasan Islam Mekarindah',
                    mapEmbed: ''
                }
            };
            renderAll();
        }

        // ==================== RENDER FUNCTIONS ====================
        function renderAll() {
            hideLoading();
            renderPengaturan();
            renderTentang();
            renderPengurus();
            renderKajian();
            renderKeuangan();
            renderZakat();
            renderKisah();
            renderGaleri();
            renderSerbaSerbi();
            
            setTimeout(observeNewElements, 100);
        }

        function observeNewElements() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.fade-in:not(.visible)').forEach(el => {
                observer.observe(el);
            });
        }

        function renderPengaturan() {
            if (DATA.pengaturan) {
                if (DATA.pengaturan.gambarMasjid) {
                    document.getElementById('heroImage').src = DATA.pengaturan.gambarMasjid;
                }
                if (DATA.pengaturan.alamat) {
                    document.getElementById('heroAddress').textContent = DATA.pengaturan.alamat;
                    document.getElementById('lokasiAlamat').textContent = DATA.pengaturan.alamat;
                }
                if (DATA.pengaturan.rekening) {
                    document.getElementById('rekeningNumber').textContent = DATA.pengaturan.rekening;
                }
                if (DATA.pengaturan.atasNama) {
                    document.getElementById('rekeningName').textContent = DATA.pengaturan.atasNama;
                }
            }
        }

        // MISI DENGAN CENTANG ✅
        function renderTentang() {
            const container = document.getElementById('tentangContent');
            if (!DATA.tentang) return;

            container.innerHTML = `
                <div class="tentang-item">
                    <h3><i class="fas fa-info-circle"></i> Deskripsi</h3>
                    <p>${DATA.tentang.deskripsi || ''}</p>
                </div>
                <div class="tentang-item">
                    <h3><i class="fas fa-eye"></i> Visi</h3>
                    <p>${DATA.tentang.visi || ''}</p>
                </div>
                <div class="tentang-item">
                    <h3><i class="fas fa-bullseye"></i> Misi</h3>
                    <ul>
                        ${(DATA.tentang.misi || []).map(m => `<li>✅ ${m}</li>`).join('')}
                    </ul>
                </div>
            `;
        }

        function renderPengurus() {
            const container = document.getElementById('pengurusContent');
            if (!DATA.pengurus || DATA.pengurus.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:var(--gray);">Belum ada data pengurus</p>';
                return;
            }

            const kategoris = ['yayasan', 'dkm', 'majlistaklim'];
            const kategoriLabels = {
                yayasan: 'Yayasan Islam Mekarindah',
                dkm: 'Dewan Kemakmuran Masjid (DKM)',
                majlistaklim: 'Majlis Ta\'lim'
            };

            let html = '';
            kategoris.forEach(kat => {
                const members = DATA.pengurus.filter(p => p.kategori === kat);
                if (members.length > 0) {
                    html += `
                        <h3 class="kategori-title fade-in">${kategoriLabels[kat]}</h3>
                        <div class="pengurus-grid fade-in">
                            ${members.map(p => `
                                <div class="pengurus-card">
                                    <img src="${p.foto || 'https://via.placeholder.com/120x120/0d7a3a/ffffff?text=Foto'}" alt="${p.nama}" class="pengurus-foto">
                                    <h4>${p.nama}</h4>
                                    <p>${p.jabatan}</p>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
            });
            container.innerHTML = html;
        }

        function renderKajian() {
            const container = document.getElementById('kajianGrid');
            if (!DATA.kajian || DATA.kajian.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:var(--gray);grid-column:1/-1;">Belum ada jadwal kajian</p>';
                return;
            }

            container.innerHTML = DATA.kajian.map(k => `
                <div class="kajian-card">
                    <div class="kajian-header">
                        <div class="kajian-icon"><i class="fas fa-book-reader"></i></div>
                        <div>
                            <p class="kajian-hari">${k.hari}</p>
                            <p class="kajian-waktu">${k.waktu}</p>
                        </div>
                    </div>
                    <p class="kajian-tema">${k.tema}</p>
                    <p class="kajian-ustadz"><i class="fas fa-user"></i> ${k.ustadz}</p>
                    ${k.link ? `<a href="${k.link}" target="_blank" class="kajian-link"><i class="fas fa-play-circle"></i> Tonton Video</a>` : ''}
                </div>
            `).join('');
        }

        function renderKeuangan() {
            const container = document.getElementById('keuanganAccordion');
            if (!DATA.keuangan || DATA.keuangan.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:var(--gray);">Belum ada laporan keuangan</p>';
                return;
            }

            container.innerHTML = DATA.keuangan.map((k, i) => {
                const saldoAkhir = k.saldoAwal + k.pemasukan - k.pengeluaran;
                return `
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-calendar-alt"></i> ${k.periode}</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <div class="saldo-ringkasan">
                                    <div class="saldo-box">
                                        <label>Saldo Awal</label>
                                        <p class="amount">${formatRupiah(k.saldoAwal)}</p>
                                    </div>
                                    <div class="saldo-box">
                                        <label>Pemasukan</label>
                                        <p class="amount" style="color:green;">+${formatRupiah(k.pemasukan)}</p>
                                    </div>
                                    <div class="saldo-box">
                                        <label>Pengeluaran</label>
                                        <p class="amount" style="color:red;">-${formatRupiah(k.pengeluaran)}</p>
                                    </div>
                                    <div class="saldo-box highlight">
                                        <label>Saldo Akhir</label>
                                        <p class="amount">${formatRupiah(saldoAkhir)}</p>
                                    </div>
                                </div>
                                ${k.rincianMasuk && k.rincianMasuk.length > 0 ? `
                                    <div class="rincian-section">
                                        <h4><i class="fas fa-arrow-down" style="color:green;"></i> Rincian Pemasukan</h4>
                                        <ul class="rincian-list">
                                            ${k.rincianMasuk.map(r => `<li>${r}</li>`).join('')}
                                        </ul>
                                    </div>
                                ` : ''}
                                ${k.rincianKeluar && k.rincianKeluar.length > 0 ? `
                                    <div class="rincian-section" style="margin-top:20px;">
                                        <h4><i class="fas fa-arrow-up" style="color:red;"></i> Rincian Pengeluaran</h4>
                                        <ul class="rincian-list">
                                            ${k.rincianKeluar.map(r => `<li>${r}</li>`).join('')}
                                        </ul>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderZakat() {
            const container = document.getElementById('zakatAccordion');
            if (!DATA.zakat || DATA.zakat.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:var(--gray);">Belum ada laporan zakat</p>';
                return;
            }

            container.innerHTML = DATA.zakat.map((z, i) => {
                const saldoAkhir = z.saldoAwal + z.pemasukan - z.pengeluaran;
                return `
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-hand-holding-heart"></i> ${z.tahun}</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <div class="saldo-ringkasan">
                                    <div class="saldo-box">
                                        <label>Saldo Awal</label>
                                        <p class="amount">${formatRupiah(z.saldoAwal)}</p>
                                    </div>
                                    <div class="saldo-box">
                                        <label>Penerimaan</label>
                                        <p class="amount" style="color:green;">+${formatRupiah(z.pemasukan)}</p>
                                    </div>
                                    <div class="saldo-box">
                                        <label>Penyaluran</label>
                                        <p class="amount" style="color:red;">-${formatRupiah(z.pengeluaran)}</p>
                                    </div>
                                    <div class="saldo-box highlight">
                                        <label>Saldo Akhir</label>
                                        <p class="amount">${formatRupiah(saldoAkhir)}</p>
                                    </div>
                                </div>
                                ${z.rincianMasuk && z.rincianMasuk.length > 0 ? `
                                    <div class="rincian-section">
                                        <h4><i class="fas fa-arrow-down" style="color:green;"></i> Rincian Penerimaan</h4>
                                        <ul class="rincian-list">
                                            ${z.rincianMasuk.map(r => `<li>${r}</li>`).join('')}
                                        </ul>
                                    </div>
                                ` : ''}
                                ${z.rincianKeluar && z.rincianKeluar.length > 0 ? `
                                    <div class="rincian-section" style="margin-top:20px;">
                                        <h4><i class="fas fa-arrow-up" style="color:red;"></i> Rincian Penyaluran</h4>
                                        <ul class="rincian-list">
                                            ${z.rincianKeluar.map(r => `<li>${r}</li>`).join('')}
                                        </ul>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderKisah() {
            const container = document.getElementById('kisahGrid');
            if (!DATA.kisah || DATA.kisah.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:var(--gray);grid-column:1/-1;">Belum ada kisah inspiratif</p>';
                return;
            }

            container.innerHTML = DATA.kisah.map((k, i) => `
                <div class="content-card" onclick="openModal('kisah', ${i})">
                    <img src="${k.gambar || 'https://via.placeholder.com/800x500/0d7a3a/ffffff?text=Kisah'}" alt="${k.judul}">
                    <div class="content-card-body">
                        <h4>${k.judul}</h4>
                        <p class="date">${formatDate(k.tanggal)}</p>
                    </div>
                </div>
            `).join('');
        }

        function renderGaleri() {
            const track = document.getElementById('galeriTrack');
            const dots = document.getElementById('galeriDots');

            if (!DATA.galeri || DATA.galeri.length === 0) {
                track.innerHTML = '<div class="galeri-slide"><p style="text-align:center;padding:50px;color:var(--gray);">Belum ada galeri</p></div>';
                dots.innerHTML = '';
                return;
            }

            track.innerHTML = DATA.galeri.map((g, i) => {
                if (g.tipe === 'foto') {
                    return `
                        <div class="galeri-slide">
                            <img src="${g.url}" alt="${g.keterangan || ''}">
                            ${g.keterangan ? `<div class="galeri-caption">${g.keterangan}</div>` : ''}
                        </div>
                    `;
                } else if (g.tipe === 'youtube') {
                    const videoId = extractYouTubeId(g.url);
                    return `
                        <div class="galeri-slide" data-video-id="${videoId}">
                            <div class="youtube-thumbnail" onclick="playYouTube(this, '${videoId}')">
                                <img src="https://img.youtube.com/vi/${videoId}/maxresdefault.jpg" 
                                     onerror="this.src='https://img.youtube.com/vi/${videoId}/hqdefault.jpg'" 
                                     alt="YouTube Video">
                                <div class="youtube-play-btn">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            ${g.keterangan ? `<div class="galeri-caption">${g.keterangan}</div>` : ''}
                        </div>
                    `;
                } else if (g.tipe === 'instagram') {
                    return `
                        <div class="galeri-slide">
                            <a href="${g.url}" target="_blank" class="social-card instagram">
                                <i class="fab fa-instagram"></i>
                                <span class="social-card-text">Lihat di Instagram</span>
                                ${g.keterangan ? `<span class="social-card-keterangan">${g.keterangan}</span>` : ''}
                                <span class="social-card-action">Buka Instagram</span>
                            </a>
                        </div>
                    `;
                } else if (g.tipe === 'tiktok') {
                    return `
                        <div class="galeri-slide">
                            <a href="${g.url}" target="_blank" class="social-card tiktok">
                                <i class="fab fa-tiktok"></i>
                                <span class="social-card-text">Lihat di TikTok</span>
                                ${g.keterangan ? `<span class="social-card-keterangan">${g.keterangan}</span>` : ''}
                                <span class="social-card-action">Buka TikTok</span>
                            </a>
                        </div>
                    `;
                }
                return '';
            }).join('');

            dots.innerHTML = DATA.galeri.map((_, i) => `
                <div class="galeri-dot ${i === 0 ? 'active' : ''}" onclick="goToSlide(${i})"></div>
            `).join('');

            startSlideshow();
        }

        function renderSerbaSerbi() {
            const container = document.getElementById('serbaSerbiGrid');
            if (!DATA.serbaSerbi || DATA.serbaSerbi.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:var(--gray);grid-column:1/-1;">Belum ada artikel</p>';
                return;
            }

            container.innerHTML = DATA.serbaSerbi.map((s, i) => `
                <div class="content-card" onclick="openModal('serbaSerbi', ${i})">
                    <img src="${s.gambar || 'https://via.placeholder.com/800x500/0d7a3a/ffffff?text=Artikel'}" alt="${s.judul}">
                    <div class="content-card-body">
                        <h4>${s.judul}${s.penting ? '<span class="badge-penting">PENTING</span>' : ''}</h4>
                        <p class="date">${formatDate(s.tanggal)}</p>
                    </div>
                </div>
            `).join('');
        }

        // ==================== HELPER FUNCTIONS ====================
        function formatRupiah(num) {
            return 'Rp ' + (num || 0).toLocaleString('id-ID');
        }

        function formatDate(dateStr) {
            if (!dateStr) return '-';
            const date = new Date(dateStr);
            return date.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
        }

        function extractYouTubeId(url) {
            const match = url.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/watch\?.+&v=))([^"&?\/\s]{11})/);
            return match ? match[1] : '';
        }

        // ==================== YOUTUBE PLAY FUNCTION ====================
        function playYouTube(container, videoId) {
            pauseSlideshow();
            document.getElementById('galeriResume').classList.add('show');
            
            const slide = container.parentElement;
            const caption = slide.querySelector('.galeri-caption');
            const captionHTML = caption ? caption.outerHTML : '';
            
            slide.innerHTML = `
                <div class="youtube-active">
                    <iframe 
                        src="https://www.youtube.com/embed/${videoId}?autoplay=1" 
                        allowfullscreen 
                        allow="autoplay; encrypted-media">
                    </iframe>
                </div>
                ${captionHTML}
            `;
        }

        function stopAllVideos() {
            if (!DATA.galeri) return;
            
            const slides = document.querySelectorAll('.galeri-slide');
            slides.forEach((slide, index) => {
                const videoId = slide.dataset.videoId;
                if (videoId) {
                    const g = DATA.galeri[index];
                    const captionHTML = g.keterangan ? `<div class="galeri-caption">${g.keterangan}</div>` : '';
                    
                    slide.innerHTML = `
                        <div class="youtube-thumbnail" onclick="playYouTube(this, '${videoId}')">
                            <img src="https://img.youtube.com/vi/${videoId}/maxresdefault.jpg" 
                                 onerror="this.src='https://img.youtube.com/vi/${videoId}/hqdefault.jpg'" 
                                 alt="YouTube Video">
                            <div class="youtube-play-btn">
                                <i class="fas fa-play"></i>
                            </div>
                        </div>
                        ${captionHTML}
                    `;
                }
            });
        }

        // ==================== GALLERY SLIDESHOW ====================
        function startSlideshow() {
            if (slideInterval) clearInterval(slideInterval);
            slidePaused = false;
            slideInterval = setInterval(() => {
                if (!slidePaused) {
                    currentSlide = (currentSlide + 1) % (DATA.galeri ? DATA.galeri.length : 1);
                    updateSlide();
                }
            }, 5000);
        }

        function pauseSlideshow() {
            slidePaused = true;
            if (slideInterval) {
                clearInterval(slideInterval);
                slideInterval = null;
            }
        }

        function nextSlide() {
            stopAllVideos();
            resumeSlideshow();
            const slides = DATA.galeri ? DATA.galeri.length : 0;
            if (slides > 0) {
                currentSlide = (currentSlide + 1) % slides;
                updateSlide();
            }
        }

        function prevSlide() {
            stopAllVideos();
            resumeSlideshow();
            const slides = DATA.galeri ? DATA.galeri.length : 0;
            if (slides > 0) {
                currentSlide = (currentSlide - 1 + slides) % slides;
                updateSlide();
            }
        }

        function goToSlide(index) {
            stopAllVideos();
            resumeSlideshow();
            currentSlide = index;
            updateSlide();
        }

        function updateSlide() {
            const track = document.getElementById('galeriTrack');
            const dots = document.querySelectorAll('.galeri-dot');
            track.style.transform = `translateX(-${currentSlide * 100}%)`;
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentSlide);
            });
        }

        function resumeSlideshow() {
            document.getElementById('galeriResume').classList.remove('show');
            startSlideshow();
        }

        // ==================== MODAL ====================
        function openModal(type, index) {
            const modal = document.getElementById('contentModal');
            const data = type === 'kisah' ? DATA.kisah[index] : DATA.serbaSerbi[index];
            
            document.getElementById('modalTitle').textContent = data.judul;
            document.getElementById('modalImage').src = data.gambar || '';
            document.getElementById('modalContent').textContent = data.isi || '';
            
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('contentModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        // ==================== ACCORDION ====================
        function toggleAccordion(header) {
            const item = header.parentElement;
            item.classList.toggle('active');
        }

        // ==================== PRAYER TIMES ====================
        async function loadPrayerTimes() {
            try {
                const today = new Date();
                const dateStr = formatDateAPI(today);
                
                const response = await fetch(
                    `https://api.aladhan.com/v1/timings/${dateStr}?latitude=${CONFIG.LATITUDE}&longitude=${CONFIG.LONGITUDE}&method=20&tune=2,2,2,2,2,2,2,2,2`
                );
                const data = await response.json();
                
                if (data.code === 200) {
                    renderPrayerTimes(data.data);
                } else {
                    renderFallbackPrayerTimes();
                }
            } catch (error) {
                console.error('Error loading prayer times:', error);
                renderFallbackPrayerTimes();
            }
        }

        function formatDateAPI(date) {
            const d = date.getDate().toString().padStart(2, '0');
            const m = (date.getMonth() + 1).toString().padStart(2, '0');
            const y = date.getFullYear();
            return `${d}-${m}-${y}`;
        }

        function renderPrayerTimes(data) {
            const timings = data.timings;
            const prayers = [
                { name: 'Subuh', time: timings.Fajr.split(' ')[0], icon: 'fa-moon' },
                { name: 'Dzuhur', time: timings.Dhuhr.split(' ')[0], icon: 'fa-sun' },
                { name: 'Ashar', time: timings.Asr.split(' ')[0], icon: 'fa-cloud-sun' },
                { name: 'Maghrib', time: timings.Maghrib.split(' ')[0], icon: 'fa-cloud-moon' },
                { name: 'Isya', time: timings.Isha.split(' ')[0], icon: 'fa-star' }
            ];

            const hijri = data.date.hijri;
            const gregorian = data.date.gregorian;
            document.getElementById('tanggalHijriah').textContent = `${hijri.day} ${hijri.month.en} ${hijri.year} H`;
            document.getElementById('tanggalMasehi').textContent = `${gregorian.weekday.en}, ${gregorian.day} ${gregorian.month.en} ${gregorian.year}`;

            const grid = document.getElementById('prayerGrid');
            const now = new Date();
            let nextPrayer = null;

            prayers.forEach((p, i) => {
                const [hours, minutes] = p.time.split(':');
                const prayerTime = new Date();
                prayerTime.setHours(parseInt(hours), parseInt(minutes), 0);

                if (!nextPrayer && prayerTime > now) {
                    nextPrayer = { ...p, index: i, dateTime: prayerTime };
                }
            });

            if (!nextPrayer) {
                const [hours, minutes] = prayers[0].time.split(':');
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(parseInt(hours), parseInt(minutes), 0);
                nextPrayer = { ...prayers[0], index: 0, dateTime: tomorrow };
            }

            grid.innerHTML = prayers.map((p, i) => {
                const isNext = nextPrayer && nextPrayer.index === i;
                return `
                    <div class="prayer-card ${isNext ? 'active' : ''}">
                        ${isNext ? '<span class="prayer-badge">Berikutnya</span>' : ''}
                        <div class="prayer-icon"><i class="fas ${p.icon}"></i></div>
                        <h4>${p.name}</h4>
                        <p class="prayer-time">${p.time}</p>
                    </div>
                `;
            }).join('');

            if (nextPrayer) {
                startCountdown(nextPrayer.dateTime, nextPrayer.name);
            }
        }

        function renderFallbackPrayerTimes() {
            const prayers = [
                { name: 'Subuh', time: '04:25', icon: 'fa-moon' },
                { name: 'Dzuhur', time: '11:55', icon: 'fa-sun' },
                { name: 'Ashar', time: '15:15', icon: 'fa-cloud-sun' },
                { name: 'Maghrib', time: '17:55', icon: 'fa-cloud-moon' },
                { name: 'Isya', time: '19:10', icon: 'fa-star' }
            ];

            const grid = document.getElementById('prayerGrid');
            grid.innerHTML = prayers.map(p => `
                <div class="prayer-card">
                    <div class="prayer-icon"><i class="fas ${p.icon}"></i></div>
                    <h4>${p.name}</h4>
                    <p class="prayer-time">${p.time}</p>
                </div>
            `).join('');

            const today = new Date();
            document.getElementById('tanggalMasehi').textContent = today.toLocaleDateString('id-ID', {
                weekday: 'long', day: 'numeric', month: 'long', year: 'numeric'
            });
        }

        function startCountdown(targetTime, prayerName) {
            const countdownEl = document.getElementById('countdownTime');
            const labelEl = document.querySelector('.countdown-label');
            
            if (countdownInterval) clearInterval(countdownInterval);
            
            function updateCountdown() {
                const now = new Date();
                let diff = targetTime - now;

                if (diff < 0) {
                    loadPrayerTimes();
                    return;
                }

                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                countdownEl.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                labelEl.textContent = `Menuju waktu ${prayerName}`;
            }

            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);
        }

        // ==================== RADIO - LANGSUNG LOAD ====================
        function loadRadio() {
            const container = document.getElementById('radioContainer');
            const isMobile = window.innerWidth < 769;
            const width = isMobile ? 280 : 600;
            const height = isMobile ? 450 : 300;
            
            container.innerHTML = `
                <iframe 
                    src="https://juneid19.github.io/mekartop/?mute=30" 
                    width="${width}" 
                    height="${height}"
                    allow="autoplay"
                    style="border-radius: 10px; border: none;">
                </iframe>
            `;
        }

        // ==================== UTILITIES ====================
        function copyRekening() {
            const rek = document.getElementById('rekeningNumber').textContent.replace(/-/g, '');
            navigator.clipboard.writeText(rek).then(() => {
                showToast('Nomor rekening berhasil disalin! ✅', 'success');
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = rek;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('Nomor rekening berhasil disalin! ✅', 'success');
            });
        }

        function loadMap() {
            const container = document.getElementById('mapContainer');
            const mapEmbed = DATA.pengaturan?.mapEmbed || `<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3965.5!2d${CONFIG.LONGITUDE}!3d${CONFIG.LATITUDE}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e699b399c77e4b3%3A0x158469441dcd4245!2sMasjid%20Jami&#39;%20Mekar%20Indah!5e0!3m2!1sid!2sid!4v1700000000000!5m2!1sid!2sid" allowfullscreen="" loading="lazy"></iframe>`;
            container.innerHTML = mapEmbed;
        }

        function hideLoading() {
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
            }, 1500);
        }

        function showToast(message, type = 'info') {
            const existing = document.querySelector('.pwa-toast');
            if (existing) existing.remove();
            
            const toast = document.createElement('div');
            toast.className = 'pwa-toast';
            toast.innerHTML = message;
            toast.style.cssText = `
                position: fixed;
                top: 80px;
                left: 50%;
                transform: translateX(-50%);
                padding: 12px 25px;
                border-radius: 25px;
                font-weight: 500;
                z-index: 9999;
                animation: fadeIn 0.3s ease;
                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : '#0d7a3a'};
                color: ${type === 'warning' ? '#1a1a2e' : 'white'};
            `;
            
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.animation = 'fadeIn 0.3s ease reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ==================== PWA SERVICE WORKER ====================
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('✅ Service Worker registered:', registration.scope);
                        
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    showUpdateNotification();
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.error('❌ Service Worker registration failed:', error);
                    });
            });
        }

        function showUpdateNotification() {
            if (confirm('📱 Versi baru tersedia! Muat ulang untuk update?')) {
                navigator.serviceWorker.ready.then((registration) => {
                    registration.waiting?.postMessage({ type: 'SKIP_WAITING' });
                });
                window.location.reload();
            }
        }

        // ==================== INSTALL PROMPT ====================
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallBanner();
        });

        function showInstallBanner() {
            if (window.matchMedia('(display-mode: standalone)').matches) return;
            
            const banner = document.createElement('div');
            banner.id = 'install-banner';
            banner.innerHTML = `
                <style>
                    #install-banner {
                        position: fixed;
                        bottom: 20px;
                        left: 50%;
                        transform: translateX(-50%);
                        background: linear-gradient(135deg, #0d7a3a, #095c2b);
                        color: white;
                        padding: 15px 20px;
                        border-radius: 15px;
                        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                        display: flex;
                        align-items: center;
                        gap: 15px;
                        z-index: 9999;
                        max-width: 90%;
                        animation: slideUp 0.5s ease;
                    }
                    @keyframes slideUp {
                        from { transform: translateX(-50%) translateY(100px); opacity: 0; }
                        to { transform: translateX(-50%) translateY(0); opacity: 1; }
                    }
                    #install-banner .icon { font-size: 2rem; }
                    #install-banner .text { flex: 1; }
                    #install-banner .text h4 { margin: 0 0 3px 0; font-size: 1rem; }
                    #install-banner .text p { margin: 0; font-size: 0.85rem; opacity: 0.9; }
                    #install-banner .btn-install {
                        background: #d4af37;
                        color: #1a1a2e;
                        border: none;
                        padding: 10px 20px;
                        border-radius: 20px;
                        font-weight: 600;
                        cursor: pointer;
                        white-space: nowrap;
                    }
                    #install-banner .btn-close {
                        background: none;
                        border: none;
                        color: white;
                        font-size: 1.5rem;
                        cursor: pointer;
                        opacity: 0.7;
                        padding: 0 5px;
                    }
                    @media (max-width: 500px) {
                        #install-banner { flex-wrap: wrap; text-align: center; justify-content: center; }
                        #install-banner .icon { display: none; }
                    }
                </style>
                <span class="icon">🕌</span>
                <div class="text">
                    <h4>Install Aplikasi</h4>
                    <p>Akses lebih cepat dari home screen</p>
                </div>
                <button class="btn-install" onclick="installPWA()">Install</button>
                <button class="btn-close" onclick="closeBanner()">&times;</button>
            `;
            
            document.body.appendChild(banner);
            setTimeout(() => closeBanner(), 30000);
        }

        function installPWA() {
            if (!deferredPrompt) return;
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                deferredPrompt = null;
                closeBanner();
            });
        }

        function closeBanner() {
            const banner = document.getElementById('install-banner');
            if (banner) {
                banner.style.animation = 'slideUp 0.3s ease reverse';
                setTimeout(() => banner.remove(), 300);
            }
        }

        window.addEventListener('appinstalled', () => {
            deferredPrompt = null;
            closeBanner();
        });

        // ==================== ONLINE/OFFLINE STATUS ====================
        window.addEventListener('online', () => showToast('Kembali online! 🌐', 'success'));
        window.addEventListener('offline', () => showToast('Anda sedang offline 📴', 'warning'));

        // ==================== EVENT LISTENERS ====================
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            loadPrayerTimes();
            loadRadio(); // RADIO LANGSUNG LOAD

            document.getElementById('navToggle').addEventListener('click', () => {
                document.getElementById('navMenu').classList.toggle('active');
            });

            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    document.getElementById('navMenu').classList.remove('active');
                });
            });

            window.addEventListener('scroll', () => {
                const btn = document.getElementById('backToTop');
                btn.classList.toggle('show', window.scrollY > 500);
            });

            document.getElementById('backToTop').addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

            document.getElementById('contentModal').addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) closeModal();
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeModal();
            });
        });
    </script>
</body>
</html>
